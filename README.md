# TESTb2b
1. Настроить на компьютере новый локальный проект на какую-нибудь новую директорию, 
создать там index.php (в настройках nginx настроить блок try files, это необходимо для того что все запросы шли на index.php)
2. На основе этого кода создать свой мини-движок:
<?php
$uri = $_SERVER['REQUEST_URI'];
$parts = explode('/', $uri);
switch ($parts[1]) {
    case 'news':
        echo 'Новости';
            $newsId = $parts[2];
            if($newsId) {
                echo 'Показываем новость ' . $newsId;
            }
        break;
    default;
        echo 'Главная страница';
        break;
    case 'about':
        echo 'О нас';
        break;
}
 
Вместо echo для вывода контента использовать include,
чтобы подключить какой-то файл шаблона (если отображение хранится отдельно, то это view)
3. Сделать так, чтобы в шаблоне выводилась переменная, 
например, если путь до страницы: /news/1 ,то в шаблоне вывести
Новость #1, где 1 - будет меняться в-зависимости от того, что писать после /news/
 Также можно внутри case: break; добавить include-ы с отдельными файлами, куда заложить логику, например эту:
 
            $newsId = $parts[2];
            if($newsId) {
                include 'templates/news.php'
            }
 Таким образом получится - роутер, контроллер, вид
4. Структура примерно такая:
templates/ - тут шаблоны
controllers/ - тут логика и подключение шаблона
index.php - тут роутер

5. Создай шапку и подвал в самописе, создав header.ru и footer.php и подключи их через require_once к каждому из шаблону страниц
У нас есть пока три страницы:
- Главная
- О нас
- Новости
-- Новость 1
-- Новость 2
-- Новость 3
- Страница 404
Убедись что для каждой страницы существует контроллер и вьюха и включи в них шапку и подвал, и меняй в-зависимости от страницы:
- title
- keywords
- текст страницы
- Подключи bootstrap, сделай верхнее меню и поле для поиска по сайту
 
5. Подключить bootstrap и в каком-то предвартельно виде отверстать контент
6. Назначить в контроллере переменную, обозначающую текущий раздел, пусть это будет $tab
7. Проверять значение этой переменной в header и подсвечивай текущий "активный" раздел
  
 -----
  
8. Подключение БД:
  
 Зайти в консоль mysql (sudo mysql -u root -p)
 Создать новую БД petproject (create database..)
 Сделать для нее нового пользователя (create user...)
 Дать необходимые привелегии пользователю (grant all privileges...) и подтерди их (flush privileges)
 Перейти в созданную базу (use petproject;)
 И создать таблицу news, состоящую из:
  
 id - первичный ключ
 header - заголовок (varchar(255))
 date - дата публикации новости (date)
 text  - текст самой новости (text)

9. - Добавь тестовые записи в таблицу news (можешь через gui, но советую запросами через консоль чтобы руки привыкли)
- В файле index.php создай подключение к базе данных с помощью https://www.php.net/manual/ru/function.mysqli-connect.php
- В контроллере news.php сделай запрос к базе данных, выбирающих все новости, вот тут есть примерчик - https://www.php.net/manual/ru/mysqli-result.fetch-assoc.php
- В шаблоне циклом выведи новости

10.Добавь в самом начале index.php строчку session_start() - стартует механиз сессий, 
почитай зачем в интернете (начни с https://www.php.net/manual/ru/session.examples.basic.php , 
если будет не совсем понятно, почитай еще материалы по запросу "Механизм сессий в php")
 
11.Вынеси часть с switch case из index.php в файл router.php там же в корне, и подключи этот роутер с помощью require_once. 
По-сути эта часть и является пока роутингом приложения. Суть роутинга - маршрутизация запроса к тому куску кода, 
которая будет являться его обработчиком
 
12 Сделай отдельную страницу и форму авторизации, для этого нужно:
-- Создать шаблон страницы (ответит за отображение)
-- Создать контроллер (кусок кода, который отвечает за обработку)
-- Маршрут в роутере (сопоставит запрос, например /login к контроллеру обработки)
-- Создать таблицу users:
--- id
--- login
--- password
 
13 В шаблоне сделай форму авторизации (оформи):
<form action="/login" method="post">
<input name="login" type="text" />
<input name="password" type="text" />
<input type="submit" value="Войти" />
</form>
 
14 В контроллере авторизации проверяй что была отправка, можно так
 
if($_POST) {
... логика
} else {
... отображаем форму авторизации
}
 
15 Внутри условия делай запрос к БД и проверяй что отправленный пользователь существует в БД 
(сравнивания что присланные в $_POST['login'] и $_POST['password'] с тем, что записано в базе данных)
 
16 Если пользователь есть, то записывай в сессию его id (пока это и будет показателем что человек зашел)
 
$_SESSION['user_id'] = $user['id']
 
и отравляй на главную страницу
 
header('Location: /');
exit;
 
17 Если записи нет, то возвращай пользователя на страницу авторизации
 
header('Location: /login');
exit;
